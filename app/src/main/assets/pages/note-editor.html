<!DOCTYPE html>
<html lang="en" Theme="blue_material">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <title>Note</title>
    <script src="../module/android.js"></script>
    <link rel="stylesheet" href="../ui-files/font-usage.css">
    <link rel="stylesheet" href="../ui-files/ui.css">
    <link rel="stylesheet" href="../ui-files/variables.css">
    <link rel="stylesheet" href="../ui-files/editorUi.css">
    <link rel="stylesheet" href="../components/components.css">
    <link rel="stylesheet" href="../components/modal-ver.css">
    <script>

        document.addEventListener('DOMContentLoaded', () => {
        themeConfig(localStorage.getItem('materialThemeColorSource') || '#aac7ff')
    setTimeout(()=>{
        if(localStorage.getItem('useDarkTheme') && localStorage.getItem('useDarkTheme') === 'true'){
        if(localStorage.getItem('clickedNote')){
        sendThemeToAndroid(getComputedStyle(document.documentElement).getPropertyValue('--Surface-Container'), getComputedStyle(document.documentElement).getPropertyValue('--Surface'), '0')
        } else{
        sendThemeToAndroid(getComputedStyle(document.documentElement).getPropertyValue('--Surface-Container'), getComputedStyle(document.documentElement).getPropertyValue('--Surface-Container'), '0')
        }
        AndroidFunctionActivityInterface.androidFunction('hideSurfaceOverlay');

    } else{
        if(localStorage.getItem('clickedNote')){
        sendThemeToAndroid(getComputedStyle(document.documentElement).getPropertyValue('--Surface-Container'), getComputedStyle(document.documentElement).getPropertyValue('--Surface'), '1')
        } else{
        sendThemeToAndroid(getComputedStyle(document.documentElement).getPropertyValue('--Surface-Container'), getComputedStyle(document.documentElement).getPropertyValue('--Surface-Container'), '1')
        }
        AndroidFunctionActivityInterface.androidFunction('hideSurfaceOverlay');
    }
    },80);
});

    </script>
</head>
<body>
    <div id="app">
    <div class="full-activity open">
        <div class="full-activity-header round" id="head-2">
            <md-icon-button onclick="ActivityBack();">
                <md-icon icon-outlined>arrow_back</md-icon>
            </md-icon-button>
            <p>Note</p>
            <flex></flex>
            <md-icon-button onclick="undo()" id="undo_btn_toggle">
                <md-icon icon-outlined>undo</md-icon>
            </md-icon-button>
            <md-icon-button onclick="redo()" id="redo_btn_toggle">
                <md-icon icon-outlined>redo</md-icon>
            </md-icon-button>
            <md-icon-button onclick="toggleView(); changeNavStatusConfig()" toggle class="view-btn" >
                <md-icon icon-outlined slot="selected">edit</md-icon>
                <md-icon icon-outlined>visibility</md-icon>
            </md-icon-button>
            <md-icon-button id="usage-popover-anchorNoteOptions">
                <md-icon icon-outlined>more_vert</md-icon>
            </md-icon-button>

            <md-menu positioning="popover" id="usage-popoverNoteOptions" anchor="usage-popover-anchorNoteOptions" anchor-corner="start-start" style="--md-menu-container-shape: 10px;">
                <md-menu-item menu-type id="pinThisNoteBtn">
                    <md-icon slot="start" id="pinThisNoteBtnIcon" icon-outlined>bookmark</md-icon>
                    <div slot="headline" id="pinThisNoteBtnText">Pin</div>
                </md-menu-item>
                <md-menu-item menu-type id="deleteThisNoteBtnAlert">
                    <md-icon slot="start" icon-outlined>delete</md-icon>
                    <div slot="headline">Delete<span style="opacity: 0;">33</span></div>
                </md-menu-item>
                <md-menu-item menu-type id="addLabelToThisNoteDialog">
                    <md-icon slot="start" icon-outlined>new_label</md-icon>
                    <div slot="headline">Label</div>
                </md-menu-item>
                <md-menu-item menu-type onclick="shareContent()" id="shareContentMenuOption">
                    <md-icon slot="start" icon-outlined>share</md-icon>
                    <div slot="headline">Share</div>
                </md-menu-item>
                <md-menu-item menu-type onclick="document.getElementById('editor').innerHTML = ''; setTimeout(()=>{document.getElementById('ClearNoteContentMenuOption').disabled = true; saveNote()},100);" id="ClearNoteContentMenuOption" disabled>
                    <md-icon slot="start" icon-outlined>close</md-icon>
                    <div slot="headline">Clear note<span style="opacity: 0;">31</span></div>
                </md-menu-item>
            </md-menu>

            <script type="module">
                const anchorElNoteOptions = document.body.querySelector('#usage-popover-anchorNoteOptions');
                const menuElNoteOptions = document.body.querySelector('#usage-popoverNoteOptions');

                anchorElNoteOptions.addEventListener('click', () => { menuElNoteOptions.open = !menuElNoteOptions.open; });
              </script>
        </div>
        <div class="full-activity-content" id="Content" style="height: calc(100% - 65px - 65px - 20px); top: 65px; width: calc(100% - 32px); padding: 0 16px 0 16px; padding-bottom: 20px;">
    
            <div class="editor">
                <div id="added_note_labels" hidden>
                </div>
                <div class="input-section">
<!--            <input type="text" id="noteTitle" placeholder="Title" autocomplete="off">-->
                    <div  id="noteTitle" placeholder="Title" oninput="if(this.innerHTML.trim()==='<br>')this.innerHTML=''" autocomplete="off"  contenteditable="plaintext-only"></div>
        </div>

        <div class="editable" id="editor" contenteditable="true" placeholder="Note" oninput="if(this.innerHTML.trim()==='<br>')this.innerHTML=''"></div>

    </div>
    
        </div>
        <id hidden></id>


        <div class="bottom_tool_bar">
            <!-- <button type="button" onclick="execCmd('bold')">Bold</button>
            <button type="button" onclick="execCmd('italic')">Italic</button>
            <button type="button" onclick="execCmd('insertUnorderedList')">Unordered List</button>
            <button type="button" onclick="execCmd('insertOrderedList')">Ordered List</button>
            <button type="button" onclick="execCmd('formatBlock', 'h1')">Heading 1</button>
            <button type="button" onclick="execCmd('formatBlock', 'p')">Paragraph</button>
            <button type="button" onclick="setTextColor('#ff0000')" style="background-color: #ff0000;"></button> 
            <button type="button" onclick="setTextColor('#00ff00')" style="background-color: #00ff00;"></button> 
            <button type="button" onclick="setTextColor('#0000ff')" style="background-color: #0000ff;"></button> 
            <button type="button" onclick="undo()">Undo</button>
            <button type="button" onclick="redo()">Redo</button> -->

            <div class="format_item">
                <input type="checkbox" id="bold_checkbox" onchange="toggleFormat('bold')">
                <label for="bold_checkbox"><md-icon icon-outlined>format_bold</md-icon></label>
            </div>

            <div class="format_item">
                <input type="checkbox" id="italic_checkbox" onchange="toggleFormat('italic')">
                <label for="italic_checkbox"><md-icon icon-outlined>format_italic</md-icon></label>
            </div>

            <div class="format_item">
                <input type="checkbox" id="underline_checkbox" onchange="toggleFormat('underline')">
                <label for="underline_checkbox"><md-icon icon-outlined>format_underlined</md-icon></label>
            </div>

            <div class="format_item">
                <input type="checkbox" id="strikethrough_checkbox" onchange="toggleFormat('strikethrough')">
                <label for="strikethrough_checkbox"><md-icon icon-outlined>format_strikethrough</md-icon></label>
            </div>


            <div class="format_item">
                <input type="checkbox" id="insertOrderedList_checkbox" onchange="toggleFormat('insertOrderedList')">
                <label for="insertOrderedList_checkbox"><md-icon icon-outlined>format_list_numbered</md-icon></label>
            </div>

            <div class="format_item">
                <input type="checkbox" id="insertUnorderedList_checkbox" onchange="toggleFormat('insertUnorderedList')">
                <label for="insertUnorderedList_checkbox"><md-icon icon-outlined>format_list_bulleted</md-icon></label>
            </div>


            <div class="format_item" onclick="document.getElementById('editor').focus()">
                <label for="heading_checkboxToggle"  id="Headingusage-popover-anchor"><md-icon icon-outlined>format_h1</md-icon></label>
                <md-menu positioning="popover" id="Headingusage-popover" anchor="Headingusage-popover-anchor" style="min-width: 40px; --md-menu-container-shape: 10px;"  stay-open-on-focusout="true" skip-restore-focus="true" quick>
                    <md-menu-item onclick="execCmd('formatBlock', 'h1')">
                        <md-icon slot="headline" icon-outlined>format_h1</md-icon>
                    </md-menu-item>
                    <md-menu-item onclick="execCmd('formatBlock', 'h2')">
                        <md-icon slot="headline" icon-outlined>format_h2</md-icon>
                    </md-menu-item>
                    <md-menu-item onclick="execCmd('formatBlock', 'h3')">
                        <md-icon slot="headline" icon-outlined>format_h3</md-icon>
                    </md-menu-item>
                    <md-menu-item onclick="execCmd('formatBlock', 'h4')">
                        <md-icon slot="headline" icon-outlined>format_h4</md-icon>
                    </md-menu-item>
                      <md-menu-item onclick="execCmd('formatBlock', 'div')">
                          <md-icon slot="headline" icon-outlined>format_paragraph</md-icon>
                      </md-menu-item>
                  </md-menu>
                  <script type="module">
                    const anchorEl = document.body.querySelector('#Headingusage-popover-anchor');
                    const menuEl = document.body.querySelector('#Headingusage-popover');
                    anchorEl.addEventListener('click', () => { menuEl.open = !menuEl.open; });
                  </script>
            </div>

            <div class="format_item" onclick="insertHR()" id="horizontal_rule_btn" style="pointer-events: none; opacity: 0.5;">
                <label ><md-icon icon-outlined>horizontal_rule</md-icon></label>
            </div>

            <div class="format_item" id="openInsertLinkDialog">
                <label ><md-icon icon-outlined>link</md-icon></label>
            </div>

            <div class="format_item">
                <input type="checkbox" id="blockquote_checkbox">
                <label for="blockquote_checkbox"  style="background-color: var(--Surface-Container-Low) !important; color: var(--On-Surface) !important;"><md-icon icon-outlined>format_quote</md-icon></label>
            </div>

            <div class="format_item">
                <input type="checkbox" id="formatBlockPre_checkbox" onchange="toggleFormatPre('formatBlock', 'pre')">
                <label for="formatBlockPre_checkbox" style="background-color: var(--Surface-Container-Low) !important; color: var(--On-Surface) !important;"><md-icon icon-outlined>code</md-icon></label>
            </div>

            <div class="format_item" onclick="document.getElementById('editor').focus()">
                <label for="Color_checkboxToggle"  id="Colorusage-popover-anchor"><md-icon icon-outlined>format_color_text</md-icon></label>
                <md-menu positioning="popover" id="Colorusage-popover" anchor="Colorusage-popover-anchor" style="min-width: 50px; --md-menu-container-shape: 10px;"  stay-open-on-focusout="true" skip-restore-focus="true" quick>
                    <md-menu-item onclick="applyColorDefault()">
                        <md-icon slot="headline" icon-outlined style="color: var(--On-Surface);">format_color_text</md-icon>
                    </md-menu-item>
                    <md-menu-item onclick="applyColorSurfaceVariant()">
                        <md-icon slot="headline" icon-outlined style="color: var(--On-Surface-Variant);">format_color_text</md-icon>
                    </md-menu-item>
                    <md-menu-item  onclick="setTextColor('#fc4c3f')">
                        <md-icon slot="headline" icon-outlined style="color: #fc4c3f;">format_color_text</md-icon>
                    </md-menu-item>
                    <md-menu-item onclick="setTextColor('#ff9900')">
                        <md-icon slot="headline" icon-outlined style="color: #ff9900;">format_color_text</md-icon>
                    </md-menu-item>
                    <md-menu-item onclick="setTextColor('#0a69fe')">
                        <md-icon slot="headline" icon-outlined style="color: #0a69fe;">format_color_text</md-icon>
                    </md-menu-item>
                  </md-menu>
                  <script type="module">
                    const anchorElColor = document.body.querySelector('#Colorusage-popover-anchor');
                    const menuElColor = document.body.querySelector('#Colorusage-popover');
                    anchorElColor.addEventListener('click', () => { menuElColor.open = !menuElColor.open; });
                  </script>
            </div>

            <div class="format_item" onclick="document.getElementById('editor').focus()">
                <label  id="Colorusage-popover-anchorBg"><md-icon icon-outlined>ink_highlighter</md-icon></label>
                <md-menu positioning="popover" id="Colorusage-popoverBg" anchor="Colorusage-popover-anchorBg" style="min-width: 50px; --md-menu-item-one-line-container-height: 15px; --md-menu-container-shape: 10px;" x-offset="-7" stay-open-on-focusout="true" skip-restore-focus="true" quick>
                    <md-menu-item onclick="removeBgColor()">
                        <md-icon slot="headline" icon-outlined style="color: var(--On-Surface); width: 25px;">format_color_reset</md-icon>
                    </md-menu-item>
                    <md-menu-item onclick="setbgColor('var(--bg-hi-1)')" style="background-color: var(--bg-hi-1);">
                        <md-icon slot="headline" icon-outlined>format_ink_highlighter</md-icon>
                    </md-menu-item>
                    <md-menu-item onclick="setbgColor('var(--bg-hi-2)')" style="background-color: var(--bg-hi-2);">
                        <md-icon slot="headline" icon-outlined>format_ink_highlighter</md-icon>
                    </md-menu-item>
                    <md-menu-item  onclick="setbgColor('var(--bg-hi-3)')" style="background-color: var(--bg-hi-3);">
                        <md-icon slot="headline" icon-outlined>format_ink_highlighter</md-icon>
                    </md-menu-item>
                    <md-menu-item onclick="setbgColor('var(--bg-hi-4)')" style="background-color: var(--bg-hi-4);">
                        <md-icon slot="headline" icon-outlined>format_ink_highlighter</md-icon>
                    </md-menu-item>
                    <md-menu-item onclick="setbgColor('var(--bg-hi-5)')" style="background-color: var(--bg-hi-5);">
                        <md-icon slot="headline" icon-outlined>format_ink_highlighter</md-icon>
                    </md-menu-item>
                </md-menu>
                <script type="module">
                    const anchorElColorBg = document.body.querySelector('#Colorusage-popover-anchorBg');
                    const menuElColorBg = document.body.querySelector('#Colorusage-popoverBg');
                    anchorElColorBg.addEventListener('click', () => { menuElColorBg.open = !menuElColorBg.open; });
                  </script>
            </div>

        </div>



        <md-dialog id="insertLinkDialog">
            <div slot="headline">Insert link</div>

            <div slot="content">
                <md-outlined-text-field style="width: 100%; margin-bottom: 10px;" placeholder="Link title" id="linkTitleInput"></md-outlined-text-field>
                <md-outlined-text-field style="width: 100%;" placeholder="URL" id="linkURLInput"></md-outlined-text-field>
            </div>

            <div slot="actions">
                <md-text-button onclick="window.history.back()">Cancel</md-text-button>
                <md-text-button onclick="insertLink()">Add</md-text-button>
            </div>
        </md-dialog>

        <md-dialog id="deleteNoteAlert" style="min-width: 85%;">
            <div slot="headline">Delete Note?</div>
            <div slot="content">
                This action cannot be undone.
            </div>
            <div slot="actions">
                <md-text-button onclick="window.history.back();">Cancel</md-text-button>
                <md-filled-button id="deleteThisNoteBtn">Delete</md-filled-button>
            </div>
        </md-dialog>

        <md-dialog id="NoteLabelDialog" style="min-width: 85%;">
            <div slot="headline">Select labels</div>
            <div slot="content" style="padding-left: 0; padding-right: 0;">
                <div id="label_selection_list">

                </div>
            </div>
            <div slot="actions">
                <md-text-button onclick="window.history.back();">Cancel</md-text-button>
                <md-text-button id="addNoteLabel">Add</md-text-button>
            </div>
        </md-dialog>
    </div>


</div>

    <script type="module" src="../index.js"></script>
    <script src="../bundle.js"></script>
    <script src="../app/note.js"></script>
    <script src="../app/editor.js"></script>
    <script src="../module/render.js"></script>
    <script src="../module/materialTheme.js" type="module"></script>

</body>
</html>